![Build Status](https://github.com/smellofnapalm/java-course-2023/actions/workflows/build.yml/badge.svg)

#### Проект 3 (анализатор логов)

Описание архитектуры проекта:

- `ArgsParser` принимает на входе `String[] args` и выдает `Map<Args,Object>`, где уже присвоены значения по-умолчанию и даты приведены к типу `OffsetDateTime`
- `LogsParser` принимает на входе одну строку логов и выдает `Map<LogsParser.Args,Object>`, тоже уже типизированный. Я решил не делать отдельного класса под результат, а остановиться на `Map`, потому что большинство значений все-таки остаются строковыми. Потом будет удобнее работать классам, реализующим `Printer`.
- `ReadLogs` находит все файлы, подходящие под паттерн или скачивает файл по URL и прогоняет все строки всех файлов через `LogsParser`
- `Statistics` содержит в себе два поля -- с типизированным записями от `LogsParser` и со списком всех прочитанных файлов. Он считает всевозможные статистики по этим данным (**кроме того, что есть в примере, я добавил подсчет того, сколько IP какой версии и в какой часовой промежуток происходили запросы**). Этот класс содержит функцию `getOutput(Printer)`, которая возвращает в виде строки все таблички результата.
- Интерфейс `Printer` имеет две реализации `ADOCPrinter` и `MarkdownPrinter`. Основная их задача -- отрисовка таблиц. Я по максимуму сделал `default` методов, чтобы принтерам было достаточно только описать, как создавать оглавление, первую строку, последнюю строку и обычную строку в таблице.
- Дирижирует этим безобразием класс `Analyzer`, который содержит только одну функцию `analyze`. Он выполняет все процедуры последовательно и записывает результат в файл `logsAnalysis` с расширением `.md` или `.adoc`.

#### Пример работы

Тестовые логи лежат в файлах `./logs.txt`, `./src/logs/2023logii.txt`, `./src/2023logs/logs.txt` и по [пути](https://raw.githubusercontent.com/elastic/examples/master/Common%20Data%20Formats/nginx_logs/nginx_logs).

Скомпилированный `.jar` лежит в корне, для запуска нужно указать четыре аргумента командной строк: `--path`, `--from`, `--to`, `--format`.

Пример запуска: 
``` 
java -jar essentials.jar --path src/logs/2023logii.txt 
--from 2010-01-01 --to 2016-11-30 --format markdown
```

Если указан неправильный формат (не `adoc` и не `markdown`), то по-умолчанию ставится `adoc`.

Если не указан параметр `--from`, или эту строку нельзя корректно распарсить, то по-умолчанию `OffsetDateTime.MIN`.

Аналогично с параметром `--to`, там по умолчанию `OffsetDateTime.MAX`.

Хочу обратить внимание, что при использовании `glob` паттерна не нужно указывать `./` в пути, потому что поскольку в примерах его не было, я приклеиваю его к пути лишь после. Т.е., если вас интересует файл в директории проекта по имени `logs.txt`, то нужно написать `--path logs.txt`, а не `--path ./logs.txt`. Указание нескольких файлов возможно лишь через один `glob` паттерн, например, можно указать `--path src/logs/2023**` и получить два тестовых файла.

Домашние задания курса https://fintech.tinkoff.ru/academy/java

Студент: `Чирков Михаил`
